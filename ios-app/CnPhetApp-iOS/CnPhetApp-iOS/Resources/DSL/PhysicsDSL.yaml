# ==============================================
# Physics DSL v4 （覆盖 K12 ~90%）
# 详细中文注释版本
# ==============================================

subject: physics   # 学科：物理（支持 math/chemistry/biology 等扩展）

scene:
  coordinate_system: cartesian   # 仿真使用的坐标系：cartesian（直角坐标）/ polar（极坐标）/ spherical（球坐标）
  time:
    start: 0       # 仿真起始时间（单位：秒）
    end: 10        # 仿真结束时间
    step: 0.01     # 仿真步长，越小精度越高，但计算量也越大
  ignore: ["air_resistance", "energy_loss"]  # 忽略的物理因素：空气阻力、能量损失（可选）

# ===============================
# 1. Objects (物体定义)
# ===============================
objects:
  # ---- 力学常见物体 ----
  - id: particle1
    type: particle        # 质点（小球）
    mass: 1.0             # 质量 kg
    radius: 0.05          # 半径 m（用于动画渲染）
    constraint: free      # 运动约束：自由运动
    initial:
      position: {x: 0, y: 1}   # 初始位置 (m)
      velocity: {x: 0, y: 0}   # 初始速度 (m/s)

  - id: cart1
    type: block           # 小车/滑块
    mass: 2.0
    size: {width: 0.5, height: 0.2}   # 尺寸（渲染用）
    constraint: inclined_plane(angle: 30)  # 限制在30°斜面上运动

  - id: pendulum1
    type: pendulum        # 单摆
    length: 1.0           # 摆长 m
    mass: 0.5             # 摆球质量 kg
    angle: 30deg          # 初始偏角（度）
    pivot: {x: 0, y: 0}   # 支点坐标

  - id: spring1
    type: spring          # 弹簧
    k: 100                # 劲度系数 N/m
    rest_length: 0.5      # 原长 m
    attach: [cart1, wall] # 一端连接小车，一端连接墙壁

  # ---- 声学 ----
  - id: tuning_fork1
    type: tuning_fork
    frequency: 440         # 频率 Hz（音叉）
    amplitude: 0.01        # 振幅 m

  - id: wave_source1
    type: wave_source
    wave_type: longitudinal # 波型：longitudinal（纵波）/ transverse（横波）
    frequency: 20          # 频率 Hz
    wavelength: 0.1        # 波长 m
    amplitude: 0.05        # 振幅 m

  # ---- 热学 ----
  - id: gas1
    type: ideal_gas
    n: 1.0                  # 物质的量 mol
    V: 0.0224               # 体积 m³
    T: 300                  # 温度 K

  - id: heater1
    type: heater
    power: 1000             # 加热功率 W

  - id: calorimeter1
    type: calorimeter
    capacity: 4200          # 热容 J/K

  # ---- 电磁学 ----
  - id: charge1
    type: charge
    q: 1e-6                 # 电荷量 C
    position: {x: 0.5, y: 0}

  - id: current1
    type: current
    I: 2.0                  # 电流大小 A
    direction: {x: 1, y: 0} # 电流方向

  - id: resistor1
    type: resistor
    R: 100                  # 电阻值 欧姆
    connect: [node1, node2] # 连接的电路节点

  - id: capacitor1
    type: capacitor
    C: 1e-6                 # 电容值 F
    connect: [node2, node3]

  - id: inductor1
    type: inductor
    L: 0.01                 # 电感 H
    connect: [node3, node4]

  - id: solenoid1
    type: solenoid
    turns: 200              # 匝数
    length: 0.5             # 长度 m
    current: 1.0            # 电流 A

  # ---- 光学 ----
  - id: light1
    type: light
    wavelength: 600e-9      # 波长 m
    direction: right        # 入射方向

  - id: lens1
    type: lens
    focal_length: 0.2       # 焦距 m
    position: {x: 1, y: 0}

  - id: mirror1
    type: mirror
    shape: concave          # concave 凹面镜 / convex 凸面镜
    focal_length: 0.3
    position: {x: 2, y: 0}

  - id: slit1
    type: double_slit
    d: 0.0001               # 双缝间距 m
    screen_distance: 1.0    # 干涉屏距离 m

  # ---- 现代物理 ----
  - id: photon1
    type: photon
    energy: 3.2e-19         # 光子能量 J

  - id: nucleus1
    type: nucleus
    protons: 6              # 质子数
    neutrons: 6             # 中子数

# ===============================
# 2. Motions (运动模型)
# ===============================
motions:
  - target: particle1
    type: free_fall         # 自由落体
    params: {g: 9.8}

  - target: particle1
    type: projectile        # 抛体运动
    params: {g: 9.8, angle: 45, speed: 10}

  - target: pendulum1
    type: oscillation       # 简谐运动（单摆近似）
    params: {amplitude: 0.2, frequency: 1.5}

  - target: wave_source1
    type: wave_propagation  # 波动传播
    params: {medium: air, velocity: 340}  # 空气中声速 340 m/s

  - target: gas1
    type: isothermal_process   # 等温过程
    params: {pV: constant}

  - target: gas1
    type: adiabatic_process    # 绝热过程
    params: {pV_gamma: constant, gamma: 1.4}

# ===============================
# 3. Connectors (约束/连接)
# ===============================
connectors:
  - type: rope
    between: [cart1, pulley1]   # 绳子连接小车和滑轮
    massless: true

  - type: spring
    k: 200
    rest_length: 0.3
    between: [particle1, wall]  # 弹簧连接小球和墙壁

  - type: circuit
    elements: [resistor1, capacitor1, inductor1] # RLC 串联电路
    source: current1

# ===============================
# 4. Forces & Fields (力与场)
# ===============================
forces:
  - type: gravity
    g: 9.8
    target: [particle1, cart1]  # 对象受重力

  - type: friction
    target: cart1
    mu: 0.2                     # 摩擦系数

  - type: buoyancy
    target: particle1
    fluid_density: 1000         # 浮力（密度=水）

  - type: electric_field
    E: {x: 100, y: 0}           # 电场强度 N/C

  - type: magnetic_field
    B: {x: 0, y: 0, z: 1}       # 磁场分布 T

# ===============================
# 5. Initial Conditions (初始条件)
# ===============================
initial:
  temperature: {object: gas1, T: 300}    # 气体初温
  displacement: {object: spring1, dx: 0.1} # 弹簧初始形变量
  release_condition: {object: particle1, velocity: 0, from_rest: true} # 质点静止释放

# ===============================
# 6. Outputs (输出结果)
# ===============================
outputs:
  - type: trajectory
    objects: [particle1, pendulum1, cart1] # 输出运动轨迹

  - type: velocity
    objects: [particle1, cart1]            # 输出速度

  - type: energy
    objects: [particle1, pendulum1, gas1]
    components: [kinetic, potential, thermal, spring] # 输出动能/势能/热能/弹簧能

  - type: visualization
    show: [forces, wavefronts, interference_pattern, field_lines] # 可视化：力、波前、干涉条纹、场线

  - type: spectrum
    objects: [light1]
    components: [wavelength, intensity]    # 输出光谱图

# ===============================
# 7. Extra (兜底扩展)
# ===============================
extra:
  description: "扩展到声学、热学、电磁学、光学、现代物理"
  notes: "覆盖初一到高三大多数知识点（约90%）"
